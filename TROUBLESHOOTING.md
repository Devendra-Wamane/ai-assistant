# ğŸš¨ CI/CD Pipeline Troubleshooting Guide

## ğŸ” Common Issues & Solutions

### 1. ğŸš« "The operation was canceled"

**Causes:**
- â° **Timeout**: Job exceeded time limits
- ğŸ”„ **Concurrent Runs**: New push canceled previous workflow
- ğŸ’¾ **Resource Limits**: GitHub Actions usage limits reached
- ğŸ›‘ **Manual Cancellation**: Someone manually stopped the workflow

**Solutions:**
```bash
# âœ… Check workflow status
./check-pipeline-status.sh

# âœ… View recent runs
gh run list

# âœ… Re-trigger the workflow
git commit --allow-empty -m "trigger: Re-run CI/CD pipeline"
git push origin main
```

### 2. ğŸ“¦ Python Version Compatibility Error

**Error Pattern:** FastAPI version incompatibility
```
ERROR: Ignored the following versions that require a different python version: 0.129.0 Requires-Python >=3.10
ERROR: Could not find a version that satisfies the requirement fastapi==0.129.0
```

**Root Cause:** FastAPI 0.129.0 requires Python â‰¥3.10, but workflow tested Python 3.9

**Solutions:**
```bash
# âœ… Check your Python version
python --version
./check-python-compatibility.py

# âœ… Upgrade Python if needed
# Via pyenv:
pyenv install 3.11
pyenv global 3.11

# Via conda:
conda create -n ai-assistant python=3.11
conda activate ai-assistant
```

### 3. ğŸ“¦ General Dependency Installation Failures

**Error Pattern:** `pip install` hanging or failing
```
Downloading fastapi-0.129.0-py3-none-any.whl (102 kB)
...
Error: The operation was canceled.
```

**Solutions:**
- âœ… **Added timeout handling** in updated workflow
- âœ… **Added retry logic** for pip installations
- âœ… **Caching** to speed up future runs

### 3. ğŸ”’ Security Scan Issues

**Error Pattern:** Security vulnerabilities blocking deployment

**Solutions:**
```yaml
# In workflow: continue-on-error: true
security-scan:
  continue-on-error: true  # Don't block deployment
```

### 4. ğŸ³ Docker Build Timeouts

**Error Pattern:** Docker build exceeding time limits

**Solutions:**
- âœ… **Added 30-minute timeout** for Docker builds
- âœ… **Multi-stage caching** to speed up builds
- âœ… **Platform-specific builds** (AMD64/ARM64)

## ğŸ”§ Quick Fixes

### Fix 1: Clear Workflow Cache
```bash
# Clear GitHub Actions cache
gh cache delete --all
```

### Fix 2: Re-run Failed Workflow
```bash
# Get the run ID and re-run
gh run list
gh run rerun <run-id>
```

### Fix 3: Force New Workflow Run
```bash
# Create empty commit to trigger new run
git commit --allow-empty -m "ci: Force pipeline re-run"
git push origin main
```

### Fix 4: Check Resource Usage
```bash
# Check GitHub Actions usage
gh api user/settings/billing/actions
```

## ğŸ“Š Monitoring Commands

```bash
# Real-time workflow monitoring
watch -n 10 'gh run list --limit 1'

# View workflow logs
gh run view --log

# Check specific job logs
gh run view --job "ğŸ§ª Test Suite"
```

## ğŸš€ Best Practices

1. **âœ… Small Commits**: Keep commits focused and small
2. **âœ… Test Locally**: Run tests before pushing
3. **âœ… Monitor Resources**: Watch GitHub Actions usage
4. **âœ… Use Caching**: Speed up workflows with cache
5. **âœ… Set Timeouts**: Prevent hanging jobs

## ğŸ†˜ Emergency Actions

If your pipeline is completely broken:

```bash
# 1. Stop all running workflows
gh run list --status in_progress | xargs -I {} gh run cancel {}

# 2. Create minimal workflow
git checkout -b fix/pipeline
# Edit .github/workflows/deploy.yml with minimal config

# 3. Test with simple commit
git add .
git commit -m "fix: Minimal pipeline test"
git push origin fix/pipeline

# 4. Create PR to test before merging to main
gh pr create --title "Fix: Pipeline improvements"
```

## ğŸ“ Need Help?

1. ğŸ” **Check Status**: `./check-pipeline-status.sh`
2. ğŸ“Š **View Logs**: `gh run view --log`
3. ğŸ’¬ **GitHub Issues**: Report issues with logs
4. ğŸ“š **Documentation**: Check GitHub Actions docs

---
*Generated by AI Assistant DevOps Pipeline* ğŸ¤–